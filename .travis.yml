

jobs:
  include:
    - stage: test
      name: "Unit Tests"
      language: python
      services:
        - postgresql
      install:
        - pip install -r requirements.txt
      env:
        -ENS_SQL_SERVER="localhost"
        -ENS_SQL_HOST="localhost"
        -ENS_SQL_USERNAME="postgres"
        -ENS_SQL_USER="postgres"
        -ENS_SQL_PASS=""
        -ENS_SQL_DBNAME="5432"
        -PYTHONPATH=$PYTHONPATH:$(pwd)/src
      git:
        submodules: false
      before_install:
        - git submodule update --init --recursive
      before_script:
        - psql -c "CREATE DATABASE testdb;" -U postgres
      script:
        - pytest -vv